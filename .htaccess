Options +FollowSymLinks
RewriteEngine On
RewriteBase /pb/

# Prevent redirecting actual files
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Raw format
RewriteRule ^raw/([^/]+)/?$ raw/raw.php?rid=$1 [L]

# Embed a post with JavaScript
RewriteRule ^embed/([^/]+)/?$ embed/embed_js.php?rid=$1 [L]

# Print post
RewriteRule ^print/([^/]+)/?$ print/print.php?rid=$1 [L]

# User profiles
RewriteRule ^u/([^/]+)/?$ u/profile.php?usr=$1 [L]

# Edit profile
RewriteRule ^u/edit/([^/]+)/?$ u/edit/profile.php?usr=$1 [L]

# Search archive by syntax
RewriteRule ^archive/([^/]+)/?$ archive/searcharchive.php?syntax=$1 [L]

# Index alias (action handling)
RewriteRule ^([a-zA-Z0-9]+)/?$ index.php?action=$1 [L]

# Post routes
RewriteRule ^([a-zA-Z]+)?$ post.php?pid=$1 [L]
RewriteRule ^([0-9]+)?$ post.php?pid=$1 [L]
